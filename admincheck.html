<!DOCTYPE html>
<html>
<head>
    <title>Admin - จัดการข้อความ</title>
    <style>
        .message-item { 
            border: 1px solid #ccc; 
            margin: 10px; 
            padding: 10px; 
        }
        .delete-btn { 
            background: red; 
            color: white; 
            border: none; 
            padding: 5px 10px; 
        }
    </style>
</head>
<body>
    <h1>จัดการข้อความอวยพร</h1>
    <div id="messagesList"></div>
    
    <script>
        async function loadMessages() {
            const response = await fetch('firebase_proxy.php?action=get');
            const data = await response.json();
            
            const container = document.getElementById('messagesList');
            container.innerHTML = '';
            
            data.messages.forEach(msg => {
                const div = document.createElement('div');
                div.className = 'message-item';
                div.innerHTML = `
                    <strong>${msg.name}</strong><br>
                    ${msg.message}<br>
                    <small>${msg.timestamp}</small><br>
                    <button class="delete-btn" onclick="deleteMessage('${msg.id}')">ลบ</button>
                `;
                container.appendChild(div);
            });
        }
        
        async function deleteMessage(id) {
            if (confirm('ต้องการลบข้อความนี้?')) {
                const response = await fetch('firebase_proxy.php', {
                    method: 'POST',
                    body: new FormData().append('action', 'delete').append('id', id)
                });
                loadMessages(); // Reload
            }
        }
        
        loadMessages();
    </script>
</body>
</html>
